import { type Bud } from './index.js';
import { Service } from './service.js';
/**
 * Map of module signifiers to absolute paths
 */
type Resolutions = Record<string, string>;
/**
 * Module cache data
 */
interface ModuleCache {
    resolutions: Resolutions;
    sha1: string;
    version: string;
}
/**
 * Module resolver
 */
export declare class Module extends Service {
    /**
     * Bootstrapped args
     */
    args: {
        cache?: boolean;
        force?: boolean;
    };
    /**
     * Cached resolutions data
     */
    cache: ModuleCache;
    /**
     * Imported modules
     */
    modules: Record<string, any>;
    /**
     * Bootstrapped paths
     */
    paths: {
        storage: string;
    };
    /**
     * Resolved module paths
     */
    resolutions: Resolutions;
    /**
     * Cache enabled
     */
    get cacheEnabled(): boolean;
    /**
     * Cache location
     */
    get cachePath(): string;
    /**
     * Constructor
     */
    constructor(options: {
        app: () => Bud;
        args: Record<string, any>;
        paths: {
            storage: string;
        };
    });
    /**
     * {@link Service.bootstrap}
     */
    bootstrap(bud: Bud): Promise<void>;
    /**
     * At end of process write resolutions to cache
     */
    after(bud: Bud): Promise<Bud>;
    /**
     * Get `package.json` absolute path from a module signifier
     */
    getDirectory(signifier: string, context?: string): Promise<string>;
    /**
     * Get `package.json` absolute path from a module signifier
     */
    getManifestPath(signifier: string): Promise<string>;
    /**
     * Import a module from its signifier
     */
    import(signifier: string, context?: string, options?: {
        bustCache?: boolean;
        raw?: boolean;
    }): Promise<any>;
    /**
     * Make context URL
     */
    makeContextURL(context?: string | URL): URL;
    /**
     * Read `package.json` manifest from a module signifier
     */
    readManifest(signifier: string): Promise<any>;
    /**
     * Reset cache
     */
    resetCache(): Promise<void>;
    /**
     * Resolve a module path from its signifier
     */
    resolve(signifier: string, context?: string): Promise<string>;
    /**
     * Get a previously imported module
     */
    getModule(signifier: string): any;
    /**
     * Check if a module has been imported
     */
    hasModule(signifier: string): boolean;
    /**
     * Remove a module
     */
    removeModule(signifier: string): boolean;
    /**
     * Set a module
     */
    setModule(signifier: string, module: any): void;
    /**
     * Get a module resolution
     */
    getResolution(signifier: string): string;
    /**
     * Check if a module has been resolved
     */
    hasResolution(signifier: string): boolean;
    removeResolution(signifier: string): boolean;
    /**
     * Resolve a module from a particular URL
     */
    setResolution(signifier: string, url: string): void;
}
export {};

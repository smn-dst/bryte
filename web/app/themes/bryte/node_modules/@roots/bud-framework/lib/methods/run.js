export const run = async function () {
    if (this.isProduction) {
        const compilation = await this.compiler
            ?.compile(this)
            .catch(this.catch);
        compilation?.run((error) => {
            compilation?.close((error) => {
                if (!hasCompiler(this))
                    return;
                if (error)
                    this.compiler.onError(error);
            });
        });
    }
    if (this.isDevelopment && this.server)
        await this.server.run().catch(this.server.catch);
};
function hasCompiler(bud) {
    return bud.compiler !== undefined;
}

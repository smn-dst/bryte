import isArray from '@roots/bud-support/isArray';
import isString from '@roots/bud-support/isString';
import getPort from 'get-port';
/**
 * Get a free port
 */
const requestPorts = async (include, exclude = []) => {
    const normalizedRequest = {
        exclude: portOrPortsToNumbers(exclude),
        port: portOrPortsToNumbers(include),
    };
    const port = await getPort(normalizedRequest);
    return `${port}`;
};
/**
 * Convert a string, number, or array of strings/numbers
 * to an array of numbers
 */
const portOrPortsToNumbers = (port) => isArray(port)
    ? port.map(port => (isString(port) ? parseInt(port) : port))
    : [isString(port) ? parseInt(port) : port];
export { getPort, portOrPortsToNumbers, requestPorts };

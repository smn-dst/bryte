import * as blockStyle from '@roots/wordpress-hmr/style';
import { filterCallback } from '@roots/wordpress-hmr/utility';
import * as blockVariant from '@roots/wordpress-hmr/variation';
import { getBlockType, registerBlockType, unregisterBlockType, } from '@wordpress/blocks';
/**
 * Register block
 */
export const register = ({ filters = {}, name, styles, variations, ...settings }) => {
    getBlockType(name) && unregister({ filters, name, styles, variations });
    registerBlockType(name, settings);
    styles?.map(style => {
        blockStyle.register({ block: name, ...style });
    });
    variations?.map(variation => blockVariant.register({ block: name, ...variation }));
    filterCallback(filters, name, (filter, api) => api.register(filter));
};
/**
 * Unregister block
 */
export const unregister = ({ filters, name, styles, variations, }) => {
    unregisterBlockType(name);
    styles?.map(style => blockStyle.unregister({ block: name, ...style }));
    variations?.map(variation => blockVariant.unregister({ block: name, ...variation }));
    filterCallback(filters, name, (filter, api) => api.unregister(filter));
};
